<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<html>
<head>
  <script src='wax/ext/leaflet.js' type='text/javascript'></script>
  <script src='wax/dist/wax.leaf.js' type='text/javascript'></script>
  <link href='wax/ext/leaflet.css' rel='stylesheet' type='text/css' />
  <script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
<script>
var codeAddress;
var map;
var _tilejson;
wax.tilejson('http://a.tiles.mapbox.com/v3/tamaracfa.map-t1nbdcsa.jsonp',
  function(tilejson) {
  _tilejson = tilejson;
  map = new L.Map('map-div')
    .addLayer(new wax.leaf.connector(tilejson))
    .setView(new L.LatLng(36.9749, -122.0263), 14);
	console.log(map);
	console.log(map._container);
  wax.leaf.interaction(map, tilejson)
    .on(wax.tooltip().animate(true).parent(map._container).events());

});


	codeAddress = function() {
	geocoder = new google.maps.Geocoder();
	var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        console.log(results[0]);
		var latlng = new L.LatLng(results[0].geometry.location.Ua, results[0].geometry.location.Va);
		var marker = new L.Marker(latlng); 
        map.addLayer(marker);
		
		marker.bindPopup("hey matt, thanks").openPopup();
        
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }


</script>
</head>
<body>

<label for="textfield"></label>
      <input type="text" name="textfield" id="address"><input type="submit" name="button" id="button" value="Submit" onClick="codeAddress()">
</br>
</br>
</br>      
<div id='map-div' style="height: 600px"></div>

</body>
</html>
