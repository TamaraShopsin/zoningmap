<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>waxtest</title>
<script src='wax/ext/leaflet.js' type='text/javascript'></script>
  <script src='wax/dist/wax.leaf.js' type='text/javascript'></script>
<script src='wax/ext/modestmaps.min.js' type='text/javascript'></script>
    <script src='wax/dist/wax.mm.js' type='text/javascript'></script>
    <link href='wax/theme/controls.css' rel='stylesheet' type='text/css' />
<script type="text/javascript" src="http://maps.googleapis.com/maps/api/js?sensor=false"></script>
 
<script> 
var url = 'http://a.tiles.mapbox.com/v3/tamaracfa.map-t1nbdcsa.jsonp';
var codeAddress;
wax.tilejson(url, function(tilejson) {
  var m = new MM.Map('intro-map',
    new wax.mm.connector(tilejson),
    new MM.Point(700,400));

  m.setCenterZoom(new MM.Location(tilejson.center[1],
    tilejson.center[0]),
    tilejson.center[2] - 3);

  wax.mm.zoomer(m).appendTo(m.parent);
  wax.mm.interaction(m);
  
   var geocoder;
  var map;

  codeAddress = function() {
	   geocoder = new google.maps.Geocoder();
    var address = document.getElementById("address").value;
    geocoder.geocode( { 'address': address}, function(results, status) {
      if (status == google.maps.GeocoderStatus.OK) {
        console.log(results[0].geometry.location);
		var latlng = new L.LatLng(36.9740013, -122.03032380000002);
		var marker = new L.Marker(latlng); 
        m.addLayer(marker);
        
      } else {
        alert("Geocode was not successful for the following reason: " + status);
      }
    });
  }
});

</script>



</head>

<body>
<div id='intro-map'></div>
<label for="textfield"></label>
      <input type="text" name="textfield" id="address"><input type="submit" name="button" id="button" value="Submit" onClick="codeAddress()">
</body>
</html>
